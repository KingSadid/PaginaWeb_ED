<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modelamiento del Crecimiento Poblacional de Madrid</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" rel="stylesheet">
    <style>
        .tab {
            display: none;
        }
        .tab.active {
            display: block;
        }
        .error-message {
            display: none;
            color: #e53e3e;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        body {
            font-family: 'Arial', sans-serif;
        }
        .math-display {
            text-align: center;
            margin: 1.5rem 0;
        }
        .nav-tabs {
            display: flex;
            justify-content: center;
            width: 100%;
            margin-bottom: 2rem;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto px-4 py-8 max-w-5xl">
        <!-- Encabezado -->
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-blue-600 mb-1">Modelamiento del Crecimiento Poblacional de Madrid</h1>
            <p class="text-gray-600">Página web · 2017 – 2025</p>
        </header>

        <!-- Pestañas centradas horizontalmente -->
        <div class="nav-tabs border-b border-gray-200 mb-4">
            <button class="tab-btn px-6 py-3 font-medium border-b-2 border-blue-600 text-blue-600 flex items-center" id="tab1-btn">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                    <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                </svg>
                Informe 1 - Modelo exponencial
            </button>
            <button class="tab-btn px-6 py-3 font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 flex items-center" id="tab2-btn">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M5 4a1 1 0 00-2 0v7.268a2 2 0 000 3.464V16a1 1 0 102 0v-1.268a2 2 0 000-3.464V4zM11 4a1 1 0 10-2 0v1.268a2 2 0 000 3.464V16a1 1 0 102 0V8.732a2 2 0 000-3.464V4zM16 3a1 1 0 011 1v7.268a2 2 0 010 3.464V16a1 1 0 11-2 0v-1.268a2 2 0 010-3.464V4a1 1 0 011-1z" clip-rule="evenodd"></path>
                </svg>
                Informe 2 - Modelo Logístico
            </button>
            <button class="tab-btn px-6 py-3 font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 flex items-center" id="tab3-btn">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                </svg>
                Informe 3 - Laplace
            </button>
        </div>

        <!-- Contenido de las pestañas -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-8">
            <!-- Pestaña 1: Modelo Exponencial -->
            <div id="tab1" class="tab active">
                <!-- Resumen ejecutivo -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-blue-600 flex items-center mb-4">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Resumen ejecutivo
                    </h2>
                    <p class="text-gray-700">
                        El modelamiento del crecimiento poblacional de Madrid entre 2017 y 2021 se realizó empleando ecuaciones diferenciales exponenciales. Se recopilaron datos oficiales, se ajustó un modelo exponencial y se resolvieron ecuaciones bajo diferentes condiciones iniciales. El análisis de error cuadrático permitió seleccionar la constante óptima de crecimiento y proyectar la población hasta 2025, evidenciando la utilidad de las ecuaciones diferenciales en el análisis demográfico de corto plazo.
                    </p>
                </div>

                <!-- Metodología -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-blue-600 flex items-center mb-4">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 3a1 1 0 000 2h10a1 1 0 100-2H3zm0 4a1 1 0 000 2h10a1 1 0 100-2H3zm0 4a1 1 0 100 2h10a1 1 0 100-2H3z" clip-rule="evenodd"></path>
                        </svg>
                        Metodología
                    </h2>
                    <ol class="list-decimal pl-6 text-gray-700 space-y-2">
                        <li>Recopilación de datos anuales (2017–2021).</li>
                        <li>Ajuste de la curva exponencial mediante regresión.</li>
                        <li>Formulación de la ecuación diferencial:
                            <div class="math-display" id="formula-exp-1"></div>
                        </li>
                        <li>Obtención de funciones solución y comparación de proyecciones.</li>
                        <li>Selección de la constante óptima por menor error cuadrático.</li>
                    </ol>
                </div>

                <!-- Resultados principales y conclusiones -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-blue-600 flex items-center mb-4">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm2 10a1 1 0 10-2 0v3a1 1 0 102 0v-3zm2-3a1 1 0 011 1v5a1 1 0 11-2 0v-5a1 1 0 011-1zm4-1a1 1 0 10-2 0v7a1 1 0 102 0V8z" clip-rule="evenodd"></path>
                        </svg>
                        Resultados principales y conclusiones
                    </h2>
                    <ul class="list-disc pl-6 text-gray-700 space-y-2">
                        <li>Población estimada para 2025: <strong>3,350,444</strong> a <strong>3,358,640</strong> habitantes según los modelos.</li>
                        <li>El modelo óptimo utiliza:
                            <div class="math-display" id="formula-exp-2"></div>
                        </li>
                        <li>Las ecuaciones diferenciales exponenciales resultaron útiles para describir tendencias de corto plazo.</li>
                    </ul>
                </div>

                <!-- Ecuaciones clave y visualización -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-blue-600 flex items-center mb-4">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z" clip-rule="evenodd"></path>
                        </svg>
                        Ecuaciones clave y visualización
                    </h2>
                    <div class="flex justify-center flex-col items-center">
                        <div class="math-display" id="formula-exp-3"></div>
                        <div class="math-display" id="formula-exp-4"></div>
                    </div>
                </div>

                <!-- Simulador de crecimiento exponencial -->
                <div>
                    <h2 class="text-xl font-semibold text-blue-600 flex items-center mb-4">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"></path>
                        </svg>
                        Simulador de crecimiento exponencial
                    </h2>
                    <div class="grid md:grid-cols-3 gap-6 mb-6">
                        <div>
                            <label for="exp-p0" class="block text-sm font-medium text-gray-700 mb-1">
                                Población inicial P₀
                            </label>
                            <input type="number" id="exp-p0" value="3240000" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <div class="error-message" id="exp-p0-error">Solo se admiten datos hasta 150000000</div>
                        </div>
                        <div>
                            <label for="exp-r" class="block text-sm font-medium text-gray-700 mb-1">
                                Tasa de crecimiento r (% anual)
                            </label>
                            <input type="number" id="exp-r" value="0.484" step="0.001" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <div class="error-message" id="exp-r-error">Solo se aceptan valores menores a 120</div>
                        </div>
                        <div>
                            <label for="exp-year" class="block text-sm font-medium text-gray-700 mb-1">
                                Año de proyección
                            </label>
                            <input type="number" id="exp-year" value="2025" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <div class="error-message" id="exp-year-error">El máximo es 2030</div>
                        </div>
                    </div>
                    <button id="exp-calculate" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition duration-200 mb-6">
                        Calcular proyección
                    </button>

                    <div id="exp-result" class="bg-blue-50 p-4 mb-6 text-center rounded-md">
                        <p class="text-gray-700">Proyección en el año <span id="exp-result-year">2025</span>: <strong><span id="exp-result-value">3,367,913</span> hab.</strong></p>
                    </div>

                    <div class="bg-white border rounded-lg p-4">
                        <canvas id="exp-chart" height="300"></canvas>
                    </div>
                </div>
            </div>

            <!-- Pestaña 2: Modelo Logístico -->
            <div id="tab2" class="tab">
                <!-- Resumen ejecutivo -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-blue-600 flex items-center mb-4">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Resumen ejecutivo
                    </h2>
                    <p class="text-gray-700">
                        En esta entrega se implementó la ecuación logística para modelar el crecimiento poblacional de Madrid, incorporando la capacidad de soporte (K). Se identificaron intervalos de estabilización poblacional (2020 y 2021), empleando dichos años como referencia para estimar K y resolviendo ecuaciones logísticas. El análisis mostró que elegir correctamente la capacidad de soporte es clave para proyecciones realistas.
                    </p>
                </div>

                <!-- Metodología -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-blue-600 flex items-center mb-4">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 3a1 1 0 000 2h10a1 1 0 100-2H3zm0 4a1 1 0 000 2h10a1 1 0 100-2H3zm0 4a1 1 0 100 2h10a1 1 0 100-2H3z" clip-rule="evenodd"></path>
                        </svg>
                        Metodología
                    </h2>
                    <ol class="list-decimal pl-6 text-gray-700 space-y-2">
                        <li>Formulación de la ecuación logística:
                            <div class="math-display" id="formula-log-1"></div>
                        </li>
                        <li>Selección de K a partir de datos históricos con mínima variación de población (2020, 2021).</li>
                        <li>Ajuste de la tasa de crecimiento r para minimizar el error.</li>
                        <li>Resolución y comparación de proyecciones para 2025.</li>
                    </ol>
                </div>

                <!-- Hallazgos y conclusiones -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-blue-600 flex items-center mb-4">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm2 10a1 1 0 10-2 0v3a1 1 0 102 0v-3zm2-3a1 1 0 011 1v5a1 1 0 11-2 0v-5a1 1 0 011-1zm4-1a1 1 0 10-2 0v7a1 1 0 102 0V8z" clip-rule="evenodd"></path>
                        </svg>
                        Hallazgos y conclusiones
                    </h2>
                    <ul class="list-disc pl-6 text-gray-700 space-y-2">
                        <li>Los valores estimados de K fueron <strong>3,272,000</strong> y <strong>3,288,000</strong> habitantes.</li>
                        <li>Las estimaciones para 2025 mostraron errores relativos menores al 10%, pero quedaron por debajo de la población real proyectada.</li>
                        <li>El modelo logístico es útil si K es representativo del entorno urbano y sus limitaciones.</li>
                    </ul>
                </div>

                <!-- Ecuación y visualización logística -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-blue-600 flex items-center mb-4">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z" clip-rule="evenodd"></path>
                        </svg>
                        Ecuación y visualización logística
                    </h2>
                    <div class="flex justify-center">
                        <div class="math-display" id="formula-log-2"></div>
                    </div>
                </div>

                <!-- Simulador de crecimiento logístico -->
                <div>
                    <h2 class="text-xl font-semibold text-blue-600 flex items-center mb-4">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"></path>
                        </svg>
                        Simulador de crecimiento logístico
                    </h2>
                    <div class="grid md:grid-cols-4 gap-6 mb-6">
                        <div>
                            <label for="log-p0" class="block text-sm font-medium text-gray-700 mb-1">
                                Población inicial P₀
                            </label>
                            <input type="number" id="log-p0" value="3240000" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <div class="error-message" id="log-p0-error">Solo se admiten datos hasta 150000000</div>
                        </div>
                        <div>
                            <label for="log-r" class="block text-sm font-medium text-gray-700 mb-1">
                                Tasa de crecimiento r (% anual)
                            </label>
                            <input type="number" id="log-r" value="0.484" step="0.001" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <div class="error-message" id="log-r-error">Solo se aceptan valores menores a 120</div>
                        </div>
                        <div>
                            <label for="log-k" class="block text-sm font-medium text-gray-700 mb-1">
                                Capacidad de soporte K
                            </label>
                            <input type="number" id="log-k" value="3280000" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <div class="error-message" id="log-k-error">El límite es 50,000,000</div>
                        </div>
                        <div>
                            <label for="log-year" class="block text-sm font-medium text-gray-700 mb-1">
                                Año de proyección
                            </label>
                            <input type="number" id="log-year" value="2025" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <div class="error-message" id="log-year-error">El máximo es 2030</div>
                        </div>
                    </div>
                    <button id="log-calculate" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition duration-200 mb-6">
                        Calcular proyección
                    </button>

                    <div id="log-result" class="bg-blue-50 p-4 mb-6 text-center rounded-md">
                        <p class="text-gray-700">Proyección en el año <span id="log-result-year">2025</span>: <strong><span id="log-result-value">3,279,118</span> hab.</strong></p>
                    </div>

                    <div class="bg-white border rounded-lg p-4">
                        <canvas id="log-chart" height="300"></canvas>
                    </div>
                </div>
            </div>

            <!-- Pestaña 3: Laplace - Comparación de modelos -->
            <div id="tab3" class="tab">
                <!-- Resumen ejecutivo -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-blue-600 flex items-center mb-4">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Resumen ejecutivo
                    </h2>
                    <p class="text-gray-700">
                        En esta etapa, se aplicó la transformada de Laplace para resolver las ecuaciones diferenciales (exponencial y logística) del crecimiento poblacional de Madrid, validando la equivalencia de resultados frente al método de separación de variables. El modelo logístico demostró mayor verosimilitud para proyecciones urbanas a largo plazo, siempre dependiendo de una estimación robusta de la capacidad de soporte.
                    </p>
                </div>

                <!-- Metodología -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-blue-600 flex items-center mb-4">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 3a1 1 0 000 2h10a1 1 0 100-2H3zm0 4a1 1 0 000 2h10a1 1 0 100-2H3zm0 4a1 1 0 100 2h10a1 1 0 100-2H3z" clip-rule="evenodd"></path>
                        </svg>
                        Metodología
                    </h2>
                    <ol class="list-decimal pl-6 text-gray-700 space-y-2">
                        <li>Resolución de ecuaciones exponencial y logística mediante transformada de Laplace.</li>
                        <li>Comparación de soluciones obtenidas con separación de variables.</li>
                        <li>Análisis y visualización de proyecciones para 2025.</li>
                    </ol>
                </div>

                <!-- Resultados principales y conclusiones -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-blue-600 flex items-center mb-4">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm2 10a1 1 0 10-2 0v3a1 1 0 102 0v-3zm2-3a1 1 0 011 1v5a1 1 0 11-2 0v-5a1 1 0 011-1zm4-1a1 1 0 10-2 0v7a1 1 0 102 0V8z" clip-rule="evenodd"></path>
                        </svg>
                        Resultados principales y conclusiones
                    </h2>
                    <ul class="list-disc pl-6 text-gray-700 space-y-2">
                        <li>Ambos métodos arrojaron resultados equivalentes matemáticamente.</li>
                        <li>Las estimaciones logísticas para 2025 oscilaron entre <strong>3,271,045</strong> y <strong>3,286,886</strong> habitantes; el modelo exponencial estimó <strong>3,351,652</strong>.</li>
                        <li>El valor de K es crítico y debe estimarse con técnicas precisas para planificaciones urbanas de largo plazo.</li>
                        <li>El modelo logístico es preferible para proyecciones realistas en contextos urbanos.</li>
                    </ul>
                </div>

                <!-- Transformada de Laplace: Definición y aplicación -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-blue-600 flex items-center mb-4">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.649 3.084A1 1 0 015.163 4.4 13.95 13.95 0 004 10c0 1.993.416 3.886 1.164 5.6a1 1 0 01-1.832.8A15.95 15.95 0 012 10c0-2.274.475-4.44 1.332-6.4a1 1 0 011.317-.516zM12.96 7a3 3 0 00-2.342 1.126l-.328.41-.111-.279A2 2 0 008.323 7H8a1 1 0 000 2h.323l.532 1.33-1.035 1.295a1 1 0 01-.781.375H7a1 1 0 100 2h.039a3 3 0 002.342-1.126l.328-.41.111.279A2 2 0 0011.677 14H12a1 1 0 100-2h-.323l-.532-1.33 1.035-1.295A1 1 0 0112.961 9H13a1 1 0 100-2h-.039zm1.874-2.6a1 1 0 011.833-.8A15.95 15.95 0 0118 10c0 2.274-.475 4.44-1.332 6.4a1 1 0 11-1.832-.8A13.949 13.949 0 0016 10c0-1.993-.416-3.886-1.165-5.6z" clip-rule="evenodd"></path>
                        </svg>
                        Transformada de Laplace: Definición y aplicación
                    </h2>
                    <p class="text-gray-700 mb-4">
                        La Transformada de Laplace es una técnica matemática que permite convertir ecuaciones diferenciales en ecuaciones algebraicas, simplificando su resolución. Transforma una función del dominio del tiempo \(f(t)\) a una función del dominio de la frecuencia compleja \(F(s)\).
                    </p>

                    <p class="font-medium text-gray-800 mb-2">Definición formal:</p>
                    <p class="text-gray-700 mb-4">
                        La transformada de Laplace de una función \(f(t)\) se define como:
                    </p>
                    <div class="math-display" id="formula-laplace-1"></div>

                    <p class="font-medium text-gray-800 mb-2 mt-4">Variables y parámetros:</p>
                    <ul class="list-disc pl-6 text-gray-700 space-y-1 mb-4">
                        <li>\(f(t)\): Función en el dominio del tiempo.</li>
                        <li>\(F(s)\): Transformada de Laplace (función en el dominio de la frecuencia).</li>
                        <li>\(s\): Variable compleja en el dominio de la frecuencia.</li>
                        <li>\(t\): Variable real en el dominio del tiempo.</li>
                    </ul>

                    <p class="font-medium text-gray-800 mb-2">Aplicación a ecuaciones diferenciales:</p>
                    <div class="flex justify-center flex-col items-center">
                        <div class="math-display" id="formula-laplace-2"></div>
                        <div class="math-display" id="formula-laplace-3"></div>
                    </div>
                </div>

                <!-- Simulador con transformada de Laplace - Comparación -->
                <div>
                    <h2 class="text-xl font-semibold text-blue-600 flex items-center mb-4">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"></path>
                        </svg>
                        Simulador con transformada de Laplace - Comparación exponencial vs. logística
                    </h2>

                    <div class="bg-gray-50 p-4 rounded-lg mb-6">
                        <h3 class="text-lg font-medium text-gray-800 mb-4">Controles del modelo exponencial</h3>
                        <div class="grid md:grid-cols-3 gap-6 mb-6">
                            <div>
                                <label for="comp-exp-p0" class="block text-sm font-medium text-gray-700 mb-1">
                                    Población inicial P₀
                                </label>
                                <input type="number" id="comp-exp-p0" value="3240000" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                <div class="error-message" id="comp-exp-p0-error">Solo se admiten datos hasta 150000000</div>
                            </div>
                            <div>
                                <label for="comp-exp-r" class="block text-sm font-medium text-gray-700 mb-1">
                                    Tasa de crecimiento r (% anual)
                                </label>
                                <input type="number" id="comp-exp-r" value="0.484" step="0.001" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                <div class="error-message" id="comp-exp-r-error">Solo se aceptan valores menores a 120</div>
                            </div>
                            <div>
                                <label for="comp-exp-year" class="block text-sm font-medium text-gray-700 mb-1">
                                    Año de proyección
                                </label>
                                <input type="number" id="comp-exp-year" value="2025" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                <div class="error-message" id="comp-exp-year-error">El máximo es 2030</div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg mb-6">
                        <h3 class="text-lg font-medium text-gray-800 mb-4">Controles del modelo logístico</h3>
                        <div class="grid md:grid-cols-4 gap-6 mb-6">
                            <div>
                                <label for="comp-log-p0" class="block text-sm font-medium text-gray-700 mb-1">
                                    Población inicial P₀
                                </label>
                                <input type="number" id="comp-log-p0" value="3240000" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                <div class="error-message" id="comp-log-p0-error">Solo se admiten datos hasta 150000000</div>
                            </div>
                            <div>
                                <label for="comp-log-r" class="block text-sm font-medium text-gray-700 mb-1">
                                    Tasa de crecimiento r (% anual)
                                </label>
                                <input type="number" id="comp-log-r" value="0.484" step="0.001" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                <div class="error-message" id="comp-log-r-error">Solo se aceptan valores menores a 120</div>
                            </div>
                            <div>
                                <label for="comp-log-k" class="block text-sm font-medium text-gray-700 mb-1">
                                    Capacidad de soporte K
                                </label>
                                <input type="number" id="comp-log-k" value="3280000" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                <div class="error-message" id="comp-log-k-error">El límite es 50,000,000</div>
                            </div>
                            <div>
                                <label for="comp-log-year" class="block text-sm font-medium text-gray-700 mb-1">
                                    Año de proyección
                                </label>
                                <input type="number" id="comp-log-year" value="2025" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                <div class="error-message" id="comp-log-year-error">El máximo es 2030</div>
                            </div>
                        </div>
                    </div>

                    <button id="comp-calculate" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition duration-200 mb-6">
                        Calcular proyección
                    </button>

                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        <div id="comp-exp-result" class="bg-blue-50 p-4 text-center rounded-md">
                            <p class="text-gray-700">Proyección exponencial en el año <span id="comp-exp-result-year">2025</span>: <strong><span id="comp-exp-result-value">3,367,913</span> hab.</strong></p>
                        </div>
                        <div id="comp-log-result" class="bg-blue-50 p-4 text-center rounded-md">
                            <p class="text-gray-700">Proyección logística en el año <span id="comp-log-result-year">2025</span>: <strong><span id="comp-log-result-value">3,279,118</span> hab.</strong></p>
                        </div>
                    </div>

                    <div class="bg-white border rounded-lg p-4">
                        <canvas id="comp-chart" height="300"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pie de página -->
        <footer class="text-center text-gray-500 text-sm mt-12 pb-6">
            Universidad San Buenaventura, 2025 — Autores: S.E. Acosta Osorio, B.J. Zambrano, A.C. Carillo.
        </footer>
    </div>

    <script>
        // Función para dar formato a los números
        function formatNumber(number) {
            return new Intl.NumberFormat('es-ES').format(Math.round(number));
        }

        // Funciones de validación
        function validateP0(value, errorId) {
            const p0 = parseFloat(value);
            const errorElement = document.getElementById(errorId);
            
            if (isNaN(p0) || p0 <= 0) {
                errorElement.textContent = "Ingrese un valor positivo";
                errorElement.style.display = "block";
                return false;
            } else if (p0 > 150000000) {
                errorElement.textContent = "Solo se admiten datos hasta 150000000";
                errorElement.style.display = "block";
                return false;
            }
            
            errorElement.style.display = "none";
            return true;
        }

        function validateR(value, errorId) {
            const r = parseFloat(value);
            const errorElement = document.getElementById(errorId);
            
            if (isNaN(r) || r <= 0) {
                errorElement.textContent = "Ingrese un valor positivo";
                errorElement.style.display = "block";
                return false;
            } else if (r >= 120) {
                errorElement.textContent = "Solo se aceptan valores menores a 120";
                errorElement.style.display = "block";
                return false;
            }
            
            errorElement.style.display = "none";
            return true;
        }

        function validateK(value, errorId) {
            const k = parseFloat(value);
            const errorElement = document.getElementById(errorId);
            
            if (isNaN(k) || k <= 0) {
                errorElement.textContent = "Ingrese un valor positivo";
                errorElement.style.display = "block";
                return false;
            } else if (k > 50000000) {
                errorElement.textContent = "El límite es 50,000,000";
                errorElement.style.display = "block";
                return false;
            }
            
            errorElement.style.display = "none";
            return true;
        }

        function validateYear(value, errorId) {
            const year = parseInt(value);
            const errorElement = document.getElementById(errorId);
            
            if (isNaN(year) || year < 2017) {
                errorElement.textContent = "El año mínimo es 2017";
                errorElement.style.display = "block";
                return false;
            } else if (year > 2030) {
                errorElement.textContent = "El máximo es 2030";
                errorElement.style.display = "block";
                return false;
            }
            
            errorElement.style.display = "none";
            return true;
        }

        // Funciones de cálculo
        function calculateExponential(p0, r, years) {
            const result = [];
            for (let i = 0; i <= years; i++) {
                result.push(p0 * Math.exp(r * i / 100));
            }
            return result;
        }

        function calculateLogistic(p0, r, k, years) {
            const result = [];
            const a = (k - p0) / p0;
            
            for (let i = 0; i <= years; i++) {
                const value = k / (1 + a * Math.exp(-r * i / 100));
                result.push(value);
            }
            return result;
        }

        // Función para crear o actualizar gráfico
        function createChart(ctx, labels, datasets) {
            // Destruir gráfico existente si hay uno
            if (window[ctx.id + '_chart']) {
                window[ctx.id + '_chart'].destroy();
            }
            
            // Crear nuevo gráfico
            window[ctx.id + '_chart'] = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            ticks: {
                                callback: function(value) {
                                    return (value / 1000000).toFixed(1);
                                }
                            },
                            title: {
                                display: true,
                                text: 'Población (millones)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Año (t)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
        }

        // Función para renderizar fórmulas matemáticas
        function renderMathFormulas() {
            // Modelo Exponencial
            katex.render("\\frac{dP}{dt} = rP", document.getElementById('formula-exp-1'));
            katex.render("P(t) = 3,240,000\\,e^{0.00484\\,(t-1)}", document.getElementById('formula-exp-2'));
            katex.render("\\frac{dP}{dt} = rP", document.getElementById('formula-exp-3'));
            katex.render("P(t) = P_0\\,e^{rt}", document.getElementById('formula-exp-4'));
            
            // Modelo Logístico
            katex.render("\\frac{dP}{dt} = rP\\,(1-\\frac{P}{K})", document.getElementById('formula-log-1'));
            katex.render("P(t) = \\frac{K}{1 + A\\,e^{-rt}}, \\quad A = \\frac{K - P_0}{P_0}", document.getElementById('formula-log-2'));
            
            // Laplace
            katex.render("\\mathcal{L}\\{f(t)\\} = F(s) = \\int_{0}^{\\infty} e^{-st} f(t) \\, dt", document.getElementById('formula-laplace-1'));
            katex.render("\\mathcal{L}\\left\\{\\frac{dP}{dt}\\right\\} = r\\,\\mathcal{L}\\{P\\}", document.getElementById('formula-laplace-2'));
            katex.render("\\mathcal{L}\\left\\{\\frac{dP}{dt}\\right\\} = r\\,\\mathcal{L}\\left\\{P\\left(1-\\frac{P}{K}\\right)\\right\\}", document.getElementById('formula-laplace-3'));
        }

        // Inicialización de pestañas
        document.addEventListener('DOMContentLoaded', function() {
            // Renderizar fórmulas matemáticas
            renderMathFormulas();
            
            // Configurar pestañas
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabs = document.querySelectorAll('.tab');
            
            tabButtons.forEach((button, index) => {
                button.addEventListener('click', function() {
                    // Desactivar todas las pestañas y botones
                    tabs.forEach(tab => tab.classList.remove('active'));
                    tabButtons.forEach(btn => {
                        btn.classList.remove('border-blue-600', 'text-blue-600');
                        btn.classList.add('border-transparent', 'text-gray-500');
                    });
                    
                    // Activar la pestaña seleccionada
                    tabs[index].classList.add('active');
                    button.classList.remove('border-transparent', 'text-gray-500');
                    button.classList.add('border-blue-600', 'text-blue-600');
                });
            });

            // Inicializar gráficos
            // Gráfico Exponencial
            const ctxExp = document.getElementById('exp-chart');
            const yearsExp = Array.from({length: 14}, (_, i) => 2017 + i);
            const initialDataExp = calculateExponential(3240000, 0.484, 13);
            
            createChart(ctxExp, yearsExp, [{
                label: 'Población proyectada',
                data: initialDataExp,
                borderColor: 'rgba(59, 130, 246, 1)',
                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                fill: true,
                tension: 0.1
            }]);
            
            // Gráfico Logístico
            const ctxLog = document.getElementById('log-chart');
            const yearsLog = Array.from({length: 14}, (_, i) => 2017 + i);
            const initialDataLog = calculateLogistic(3240000, 0.484, 3280000, 13);
            
            createChart(ctxLog, yearsLog, [{
                label: 'Población proyectada',
                data: initialDataLog,
                borderColor: 'rgba(16, 185, 129, 1)',
                backgroundColor: 'rgba(16, 185, 129, 0.1)',
                fill: true,
                tension: 0.1
            }]);
            
            // Gráfico Comparativo
            const ctxComp = document.getElementById('comp-chart');
            const yearsComp = Array.from({length: 14}, (_, i) => 2017 + i);
            const initialDataExpComp = calculateExponential(3240000, 0.484, 13);
            const initialDataLogComp = calculateLogistic(3240000, 0.484, 3280000, 13);
            
            createChart(ctxComp, yearsComp, [
                {
                    label: 'Modelo Exponencial',
                    data: initialDataExpComp,
                    borderColor: 'rgba(59, 130, 246, 1)',
                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                    fill: false,
                    tension: 0.1
                },
                {
                    label: 'Modelo Logístico',
                    data: initialDataLogComp,
                    borderColor: 'rgba(16, 185, 129, 1)',
                    backgroundColor: 'rgba(16, 185, 129, 0.1)',
                    fill: false,
                    tension: 0.1
                }
            ]);

            // Configurar validación y cálculos para el modelo exponencial
            document.getElementById('exp-calculate').addEventListener('click', function() {
                const p0 = parseFloat(document.getElementById('exp-p0').value);
                const r = parseFloat(document.getElementById('exp-r').value);
                const targetYear = parseInt(document.getElementById('exp-year').value);
                
                const isP0Valid = validateP0(p0, 'exp-p0-error');
                const isRValid = validateR(r, 'exp-r-error');
                const isYearValid = validateYear(targetYear, 'exp-year-error');
                
                if (isP0Valid && isRValid && isYearValid) {
                    const yearsToProject = targetYear - 2017;
                    const projections = calculateExponential(p0, r, yearsToProject);
                    
                    // Actualizar resultado
                    document.getElementById('exp-result-year').textContent = targetYear;
                    document.getElementById('exp-result-value').textContent = formatNumber(projections[yearsToProject]);
                    
                    // Actualizar gráfico
                    const years = Array.from({length: yearsToProject + 1}, (_, i) => 2017 + i);
                    createChart(ctxExp, years, [{
                        label: 'Población proyectada',
                        data: projections,
                        borderColor: 'rgba(59, 130, 246, 1)',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        fill: true,
                        tension: 0.1
                    }]);
                }
            });
            
            // Configurar validación y cálculos para el modelo logístico
            document.getElementById('log-calculate').addEventListener('click', function() {
                const p0 = parseFloat(document.getElementById('log-p0').value);
                const r = parseFloat(document.getElementById('log-r').value);
                const k = parseFloat(document.getElementById('log-k').value);
                const targetYear = parseInt(document.getElementById('log-year').value);
                
                const isP0Valid = validateP0(p0, 'log-p0-error');
                const isRValid = validateR(r, 'log-r-error');
                const isKValid = validateK(k, 'log-k-error');
                const isYearValid = validateYear(targetYear, 'log-year-error');
                
                if (isP0Valid && isRValid && isKValid && isYearValid) {
                    const yearsToProject = targetYear - 2017;
                    const projections = calculateLogistic(p0, r, k, yearsToProject);
                    
                    // Actualizar resultado
                    document.getElementById('log-result-year').textContent = targetYear;
                    document.getElementById('log-result-value').textContent = formatNumber(projections[yearsToProject]);
                    
                    // Actualizar gráfico
                    const years = Array.from({length: yearsToProject + 1}, (_, i) => 2017 + i);
                    createChart(ctxLog, years, [{
                        label: 'Población proyectada',
                        data: projections,
                        borderColor: 'rgba(16, 185, 129, 1)',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        fill: true,
                        tension: 0.1
                    }]);
                }
            });
            
            // Configurar validación y cálculos para la comparación
            document.getElementById('comp-calculate').addEventListener('click', function() {
                // Valores del modelo exponencial
                const expP0 = parseFloat(document.getElementById('comp-exp-p0').value);
                const expR = parseFloat(document.getElementById('comp-exp-r').value);
                const expTargetYear = parseInt(document.getElementById('comp-exp-year').value);
                
                // Valores del modelo logístico
                const logP0 = parseFloat(document.getElementById('comp-log-p0').value);
                const logR = parseFloat(document.getElementById('comp-log-r').value);
                const logK = parseFloat(document.getElementById('comp-log-k').value);
                const logTargetYear = parseInt(document.getElementById('comp-log-year').value);
                
                // Validación
                const isExpP0Valid = validateP0(expP0, 'comp-exp-p0-error');
                const isExpRValid = validateR(expR, 'comp-exp-r-error');
                const isExpYearValid = validateYear(expTargetYear, 'comp-exp-year-error');
                
                const isLogP0Valid = validateP0(logP0, 'comp-log-p0-error');
                const isLogRValid = validateR(logR, 'comp-log-r-error');
                const isLogKValid = validateK(logK, 'comp-log-k-error');
                const isLogYearValid = validateYear(logTargetYear, 'comp-log-year-error');
                
                // Si todos los campos son válidos
                if (isExpP0Valid && isExpRValid && isExpYearValid && isLogP0Valid && isLogRValid && isLogKValid && isLogYearValid) {
                    // Calcular el máximo número de años para proyectar (tomando el año objetivo mayor)
                    const maxTargetYear = Math.max(expTargetYear, logTargetYear);
                    const yearsToProject = maxTargetYear - 2017;
                    
                    // Calcular proyecciones
                    const expProjections = calculateExponential(expP0, expR, yearsToProject);
                    const logProjections = calculateLogistic(logP0, logR, logK, yearsToProject);
                    
                    // Actualizar resultados
                    document.getElementById('comp-exp-result-year').textContent = expTargetYear;
                    document.getElementById('comp-exp-result-value').textContent = formatNumber(expProjections[expTargetYear - 2017]);
                    
                    document.getElementById('comp-log-result-year').textContent = logTargetYear;
                    document.getElementById('comp-log-result-value').textContent = formatNumber(logProjections[logTargetYear - 2017]);
                    
                    // Actualizar gráfico
                    const years = Array.from({length: yearsToProject + 1}, (_, i) => 2017 + i);
                    createChart(ctxComp, years, [
                        {
                            label: 'Modelo Exponencial',
                            data: expProjections,
                            borderColor: 'rgba(59, 130, 246, 1)',
                            backgroundColor: 'rgba(59, 130, 246, 0.0)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.1
                        },
                        {
                            label: 'Modelo Logístico',
                            data: logProjections,
                            borderColor: 'rgba(16, 185, 129, 1)',
                            backgroundColor: 'rgba(16, 185, 129, 0.0)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.1
                        }
                    ]);
                }
            });
        });
    </script>
</body>
</html>
